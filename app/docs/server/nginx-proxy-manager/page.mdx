import { Steps } from "nextra/components";

# Nginx Proxy Manager

เครื่องมือจัดการ reverse proxy ที่สร้างขึ้นบนพื้นฐานของ Nginx โดยมีอินเทอร์เฟซแบบ Web GUI ที่ใช้งานง่าย ช่วยให้ผู้ใช้สามารถตั้งค่า reverse proxy, SSL certificates (เช่น Let's Encrypt), redirection, และ access control ได้สะดวก โดยไม่ต้องแก้ไขไฟล์ config ด้วยตนเอง

## ขั้นตอนการติดตั้ง Docker และ Docker Compose

ก่อนเริ่มการติดตั้ง Nginx Proxy Manager คุณต้องติดตั้ง Docker และ Docker Compose บนเครื่องของคุณก่อน

1. อัปเดตระบบ

    ```bash
    sudo apt-get update
    sudo apt-get upgrade
    ```

2. เพิ่ม repository ของ Docker

    ```bash
    # Add Docker's official GPG key:
    sudo apt-get update
    sudo apt-get install ca-certificates curl
    sudo install -m 0755 -d /etc/apt/keyrings
    sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
    sudo chmod a+r /etc/apt/keyrings/docker.asc

    # Add the repository to Apt sources:
    echo \
      "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
      $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
      sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
    sudo apt-get update
    ```

    > [!note]
    >
    > คัดลอกข้อความด้านบนไปวางในเทอร์มินัลของคุณและกดปุ่ม `Enter` เพื่อเพิ่ม repository ของ Docker

3. ติดตั้ง Docker

    ```bash
    sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
    ```

## ติดตั้ง Nginx Proxy Manager ด้วย Docker Compose

<Steps>

### สร้างโฟลเดอร์สำหรับเก็บไฟล์

```bash
mkdir nginx-proxy-manager
cd nginx-proxy-manager
```

### สร้างไฟล์ docker-compose.yml

คัดลอกข้อความด้านล่างแล้ววางในไฟล์ `docker-compose.yml` ที่คุณสร้างขึ้นในโฟลเดอร์ `nginx-proxy-manager`

```bash filename="~/nginx-proxy-manager/docker-compose.yml"
services:
  app:
    image: 'jc21/nginx-proxy-manager:latest'
    restart: unless-stopped
    ports:
      - '80:80'
      - '81:81'
      - '443:443'
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt
```

### บันทึกไฟล์

### รัน Docker Compose

หลังจากที่คุณได้สร้างไฟล์ `docker-compose.yml` แล้ว ให้รันคำสั่งด้านล่างเพื่อเริ่มต้น Nginx Proxy Manager

```bash
sudo docker compose up -d
```

ผลลัพธ์ที่ได้จะคล้ายกับด้านล่างนี้

```bash
[+] Running 36/36
 ✔ app Pulled                                                                     27.7s
[+] Running 2/2
 ✔ Network nginx-proxy-manager_default  Create...                                     0.1s
 ✔ Container nginx-proxy-manager-app-1  Start...                                     0.5s
```

### ตรวจสอบสถานะของ Container

```bash
docker ps
```

ผลลัพธ์ที่ได้จะคล้ายกับด้านล่างนี้

```bash
CONTAINER ID   IMAGE                             COMMAND   CREATED          STATUS          PORTS                                                                                      NAMES
43b95c3e170a   jc21/nginx-proxy-manager:latest   "/init"   40 seconds ago   Up 39 seconds   0.0.0.0:80-81->80-81/tcp, [::]:80-81->80-81/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp   nginx-proxy-manager-app-1
```

</Steps>

## ล็อกอินและตั้งค่า Nginx Proxy Manager

1. เปิดเว็บเบราว์เซอร์และไปที่

    ```plaintext
    http://ip_address:81
    ```

    ![nginx-proxy-manager-install-1](/images/nginx-proxy-manager/install-1.png)


2. ชื่อผู้ใช้และรหัสผ่านเริ่มต้นสำหรับล็อกอิน

    - Email address: admin@example.com
    - Password: changeme

3. หลังจากล็อกอินสำเร็จ ระบบจะให้คุณเปลี่ยนอีเมลและรหัสผ่าน

    3.1 เปลี่ยนอีเมล (Default email)

        ![nginx-proxy-manager-install-2](/images/nginx-proxy-manager/install-2.png)

    3.2 เปลี่ยนรหัสผ่าน (Default password)

        ![nginx-proxy-manager-install-3](/images/nginx-proxy-manager/install-3.png)


4. เสร็จสิ้น

    ![nginx-proxy-manager-install-4](/images/nginx-proxy-manager/install-4.png)
